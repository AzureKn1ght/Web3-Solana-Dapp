(this["webpackJsonpbuildspace-solana"]=this["webpackJsonpbuildspace-solana"]||[]).push([[0],{26:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"myepicproject","instructions":[{"name":"startStuffOff","accounts":[{"name":"baseAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"addGif","accounts":[{"name":"baseAccount","isMut":true,"isSigner":false},{"name":"user","isMut":true,"isSigner":true}],"args":[{"name":"gifLink","type":"string"}]}],"accounts":[{"name":"BaseAccount","type":{"kind":"struct","fields":[{"name":"totalGifs","type":"u64"},{"name":"gifList","type":{"vec":{"defined":"ItemStruct"}}}]}}],"types":[{"name":"ItemStruct","type":{"kind":"struct","fields":[{"name":"gifLink","type":"string"},{"name":"userAddress","type":"publicKey"}]}}],"metadata":{"address":"BcsgHu3sCQkC5DfMjbqM74zJEdtY4m3ZfDqMVjGYeWcU"}}')},57:function(e,t){},61:function(e,t){},63:function(e){e.exports=JSON.parse('{"_keypair":{"publicKey":{"0":158,"1":139,"2":159,"3":207,"4":204,"5":105,"6":20,"7":126,"8":127,"9":127,"10":168,"11":132,"12":138,"13":72,"14":151,"15":50,"16":157,"17":220,"18":245,"19":21,"20":169,"21":172,"22":148,"23":180,"24":169,"25":196,"26":188,"27":158,"28":32,"29":29,"30":126,"31":228},"secretKey":{"0":177,"1":115,"2":204,"3":146,"4":187,"5":105,"6":224,"7":78,"8":27,"9":75,"10":188,"11":179,"12":36,"13":87,"14":132,"15":54,"16":91,"17":212,"18":108,"19":80,"20":23,"21":161,"22":230,"23":104,"24":151,"25":79,"26":255,"27":114,"28":180,"29":1,"30":32,"31":183,"32":158,"33":139,"34":159,"35":207,"36":204,"37":105,"38":20,"39":126,"40":127,"41":127,"42":168,"43":132,"44":138,"45":72,"46":151,"47":50,"48":157,"49":220,"50":245,"51":21,"52":169,"53":172,"54":148,"55":180,"56":169,"57":196,"58":188,"59":158,"60":32,"61":29,"62":126,"63":228}}}')},69:function(e,t,n){},75:function(e,t){},92:function(e,t,n){},94:function(e,t,n){"use strict";n.r(t);var c=n(11),o=n.n(c),s=n(55),a=n.n(s),i=(n(69),n(2)),r=n(12),l=n(63),u=n(26),d=(n(92),n(5));const{SystemProgram:b,Keypair:g,Transaction:m}=r.d,p=Object.values(l._keypair.secretKey),f=new Uint8Array(p),h=g.fromSecretKey(f),y=new i.PublicKey(u.metadata.address),w=Object(i.clusterApiUrl)("devnet"),j="processed";var S=()=>{const[e,t]=Object(c.useState)(null),[n,o]=Object(c.useState)(""),[s,a]=Object(c.useState)([]),l=async()=>{const{solana:e}=window;if(e){const n=await e.connect();console.log("Connected with Public Key:",n.publicKey.toString()),t(n.publicKey.toString())}},g=e=>{const{value:t}=e.target;o(t)},p=()=>{const e=new i.Connection(w,j);return new r.b(e,window.solana,j)},f=async()=>{try{const e=p(),t=new r.a(u,y,e);console.log("ping"),await t.rpc.startStuffOff({accounts:{baseAccount:h.publicKey,user:e.wallet.publicKey,systemProgram:b.programId},signers:[h]}),console.log("Created a new BaseAccount w/ address:",h.publicKey.toString()),await O()}catch(e){console.log("Error creating BaseAccount account:",e)}},S=async e=>{if(window.confirm("Tip submitter for 0.01 SOL?"))try{const t=(()=>{if("phantom"in window){var e;const t=null===(e=window.phantom)||void 0===e?void 0:e.solana;if(null!==t&&void 0!==t&&t.isPhantom)return t}window.open("https://phantom.app/","_blank")})(),n=new i.Connection(w,j);let c=await(await n.getLatestBlockhash()).blockhash;console.log("recentBlockhash: ",c),e=e.userAddress.toString(),console.log(e);const o=t.publicKey.toString();console.log("Public key of the emitter: ",o);const s=new r.d.PublicKey(e);let a=new m;const l=b.transfer({fromPubkey:t.publicKey,toPubkey:s,lamports:r.d.LAMPORTS_PER_SOL/100});a.add(l),a.recentBlockhash=c,a.feePayer=t.publicKey,console.log("Transaction sent: ",a);const{signature:u}=await t.signAndSendTransaction(a);await n.getSignatureStatus(u),console.log("Signature: ",u),alert("Tip sent successfully! :)")}catch(t){console.log("Error: ",t)}},O=async()=>{try{const e=p(),t=new r.a(u,y,e),n=await t.account.baseAccount.fetch(h.publicKey);console.log("Got the account",n),a(n.gifList)}catch(e){console.log("Error in getGifList: ",e),a(null)}};return Object(c.useEffect)((()=>{const e=async()=>{await(async()=>{try{const{solana:e}=window;if(e){if(e.isPhantom){console.log("Phantom wallet found!");const n=await e.connect({onlyIfTrusted:!0});console.log("Connected with Public Key:",n.publicKey.toString()),t(n.publicKey.toString())}}else alert("Solana object not found! Get a Phantom Wallet \ud83d\udc7b")}catch(e){console.error(e)}})()};return window.addEventListener("load",e),()=>window.removeEventListener("load",e)}),[]),Object(c.useEffect)((()=>{e&&(console.log("Fetching GIF list..."),O())}),[e]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("div",{Style:"position: fixed; z-index: 0; width: 100%; height: 100%; top: -50%; left: -50%; pointer-events: none;",children:Object(d.jsx)("iframe",{frameborder:"0",height:"200%",width:"200%",src:"https://www.youtube-nocookie.com/embed/nq4tT68UoCg?autoplay=1&loop=1&controls=0&showinfo=0&modestbranding=1&mute=1&disablekb=1&start=60",title:"youtube"})}),Object(d.jsxs)("div",{className:e?"authed-container":"container",children:[Object(d.jsxs)("div",{className:"header-container",children:[Object(d.jsx)("p",{className:"header",children:"K-Pop GIF Portal"}),Object(d.jsx)("p",{className:"sub-text",children:"\u2728 View k-pop GIF collections in the Solana metaverse \u2728"}),!e&&Object(d.jsx)("button",{className:"cta-button connect-wallet-button",onClick:l,children:"Connect to Wallet"}),e&&(null===s?Object(d.jsx)("div",{className:"connected-container",children:Object(d.jsx)("button",{className:"cta-button submit-gif-button",onClick:f,children:"Do One-Time Initialization For GIF Program Account"})}):Object(d.jsxs)("div",{className:"connected-container",children:[Object(d.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(0!==n.length){o(""),console.log("Gif link:",n);try{const e=p(),t=new r.a(u,y,e);await t.rpc.addGif(n,{accounts:{baseAccount:h.publicKey,user:e.wallet.publicKey}}),console.log("GIF successfully sent to program",n),await O()}catch(e){console.log("Error sending GIF:",e)}}else console.log("No gif link given!")})()},children:[Object(d.jsx)("input",{type:"text",placeholder:"Enter gif link!",value:n,onChange:g}),Object(d.jsx)("button",{type:"submit",className:"cta-button submit-gif-button",children:"Submit"})]}),Object(d.jsx)("div",{className:"gif-grid",children:s.map(((e,t)=>Object(d.jsxs)("div",{className:"gif-item",children:[Object(d.jsx)("img",{src:e.gifLink,alt:"gif"}),Object(d.jsxs)("div",{className:"tip",id:e.userAddress.toString(),onClick:S.bind(void 0,e),children:["\ud83d\udcb0 ",e.userAddress.toString()]})]},t)))})]}))]}),Object(d.jsx)("div",{className:"footer-container",children:Object(d.jsx)("a",{className:"footer-text",href:"https://github.com/AzureKn1ght",target:"_blank",rel:"noreferrer",children:"Built with \u2665 by AzureKn1ght"})})]})]})};a.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(S,{})}),document.getElementById("root"))}},[[94,1,2]]]);
//# sourceMappingURL=main.985f02c7.chunk.js.map